/*! zui - v1.0.0 -  *2015-11-03 by Wangdahoo */!function(){function a(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=m[a])});16>e;)b[d+e++]=0;return b}function b(a,b){var c=b||0,d=l;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function c(a,c,d){var e=c&&d||0,f=c||[];a=a||{};var g=null!=a.clockseq?a.clockseq:q,h=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:s+1,j=h-r+(i-s)/1e4;if(0>j&&null==a.clockseq&&(g=g+1&16383),(0>j||h>r)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=h,s=i,q=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[e++]=k>>>24&255,f[e++]=k>>>16&255,f[e++]=k>>>8&255,f[e++]=255&k;var l=h/4294967296*1e4&268435455;f[e++]=l>>>8&255,f[e++]=255&l,f[e++]=l>>>24&15|16,f[e++]=l>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var m=a.node||p,n=0;6>n;n++)f[e+n]=m[n];return c?c:b(f)}function d(a,c,d){var e=c&&d||0;"string"==typeof a&&(c="binary"==a?new k(16):null,a=null),a=a||{};var f=a.random||(a.rng||h)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,c)for(var g=0;16>g;g++)c[e+g]=f[g];return c||b(f)}function e(){this.id="",this.duration=1500,this.max=18e4}function f(){this.id=""}function g(){this.id=""}var h,i=this;if(!h){var j=new Array(16);h=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),j[b]=a>>>((3&b)<<3)&255;return j}}for(var k=Array,l=[],m={},n=0;256>n;n++)l[n]=(n+256).toString(16).substr(1),m[l[n]]=n;var o=h(),p=[1|o[0],o[1],o[2],o[3],o[4],o[5]],q=16383&(o[6]<<8|o[7]),r=0,s=0,t=d;t.v1=c,t.v4=d,t.parse=a,t.unparse=b,t.BufferClass=k;var u=function(){};u.extend=function(a,b){var c=u.prototype.extend;u._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete u._prototyping;var e=d.constructor,f=d.constructor=function(){if(!u._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},u.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||u.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=u.toString}this[a]=b}else if(a){var e=u.prototype.extend;u._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=u._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},u=u.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});var v={},w=u.extend({constructor:function(a){if(this.title=a.title||"",void 0!=a.backButton&&"function"!=typeof a.backButton)throw new Error("backButton should be a function!");this.backButton=a.backButton,this.theme=a.theme||v.pageTheme,this.pageId="page-"+t.v4().substr(0,8),this.$el=$("#"+this.pageId),this.template=a.template,this.model=a.model||{},this.transition=a.transition||"forward",this.ready=a.ready,a.init&&"function"==typeof a.init&&(this.init=a.init,this.init())},init:function(){},render:function(a){var b=this,c=$("body"),d="page-fade-in",e="page-fade-out",f=400;"default"==v.pageTransition?(d="page-fade-in",e="page-fade-out"):"ios"==v.pageTransition&&("forward"==a&&(d="page-from-right-to-center",e="page-from-center-to-left"),"back"==a&&(d="page-from-left-to-center",e="page-from-center-to-right")),c.find(".ui-page").removeClass("page-from-right-to-center").removeClass("page-from-left-to-center");var g,h='<div class="ui-nav '+("string"==typeof this.theme?"ui-nav-"+this.theme:"")+'">';"function"==typeof this.backButton&&(g="btn-back-"+t.v4().substr(0,8),h+='<button id="'+g+'" class="ui-btn"><i class="ui-icon ui-icon-angle-left"></i> </button>'),h+='<div class="title">'+this.title+"</div></div>";var i="string"==typeof this.template?this.template:this.template(this.model);c.append(h+'<div class="ui-page" id="'+b.pageId+'">'+i+"</div>"),"function"==typeof this.backButton&&$("#"+g).on("click",function(a){b.backButton(a)}),$("body>.ui-page").size()<2&&c.prepend('<div class="ui-page"></div>'),$("body>.ui-nav").size()<2&&c.prepend('<div class="ui-nav '+("string"==typeof this.theme?"ui-nav-"+this.theme:"")+'"><div class="title"></div></div>');var j=$("body>.ui-page:eq(0)"),k=$("body>.ui-page:eq(1)"),l=$("body>.ui-nav:eq(0)"),m=$("body>.ui-nav:eq(1)");return j.addClass(e),l.find(".title, .ui-btn").addClass("page-fade-out"),k.addClass(d),m.find(".title, .ui-btn").addClass("page-fade-in"),_.delay(function(){j.empty().remove(),l.empty().remove(),"function"==typeof b.ready&&b.ready()},f),this},refresh:function(){var a=$("#"+this.pageId),b="string"==typeof this.template?this.template:this.template(this.model);return a.empty().append(b),"function"==typeof this.ready&&this.ready(),this}});e.prototype.cleanup=function(){$("body .ui-modal-loading, body .ui-modal-overlay").empty().remove()},e.prototype.show=function(a){var b,c;if("string"==typeof arguments[0])b=arguments[0],c=-1==arguments[1]?this.max:this.duration;else{if("object"!=typeof arguments[0])throw new Error("Illegal Parameters");b=a.message,c=-1==a.duration?this.max:a.duration||this.duration}var d="loading-"+t.v4().substr(0,8),e='<div id="'+d+'" class="ui-modal ui-modal-loading"><div class="ui-modal-content"><div class="preload-wrapper"><div class="preload"></div></div><p>'+b+'</p></div></div><div class="ui-modal-overlay"></div>',f=this;return f.cleanup(),$("body").append(e),_.delay(function(){var a=$("#"+d);a.addClass("ui-modal-show"),_.delay(function(){a.removeClass("ui-modal-show"),_.delay(function(){f.cleanup()},300)},c+300)},50),this.id=d},e.prototype.hide=function(){var a=this;return $("#"+a.id).removeClass("ui-modal-show"),_.delay(function(){a.cleanup()},300),this.id=""};var x=new e;f.prototype.cleanup=function(){$("body .ui-modal-loading, body .ui-modal-overlay").empty().remove()},f.prototype.show=function(a,b){a=a||"",b=b||1500;var c="toast-"+t.v4().substr(0,8),d='<div id="'+c+'" class="ui-modal ui-modal-loading"><div class="ui-modal-content"><p>'+a+'</p></div></div><div class="ui-modal-overlay"></div>',e=this;e.cleanup(),$("body").append(d),_.delay(function(){var a=$("#"+c);a.addClass("ui-modal-show"),_.delay(function(){a.removeClass("ui-modal-show"),_.delay(function(){e.cleanup()},300)},b+300)},50)};var y=new f;g.prototype.cleanup=function(){$("body .ui-modal-dialog, body .ui-modal-overlay").empty().remove()},g.prototype.alert=function(a){var b,c="提示",d="assertive",e="确定",f="alert-"+t.v4().substr(0,8),g="btn-ok-"+t.v4().substr(0,8),h=function(a){$("#"+f).removeClass("ui-modal-show"),_.delay(function(){j.cleanup()},300)};if("string"==typeof arguments[0])b=arguments[0]||"";else{if("object"!=typeof arguments[0])throw new Error("Illegal Parameters");b=a.message||"",a.title&&(c=a.title),"assertive"!=a.btnOkTheme&&(d="positive"),a.btnOkText&&(e=a.btnOkText)}var i='<div id="'+f+'" class="ui-modal ui-modal-dialog"><div class="ui-modal-content"><h2>'+c+"</h2><p>"+b+'</p><button id="'+g+'" class="ui-btn ui-btn-block ui-btn-'+d+'">'+e+'</button></div></div><div class="ui-modal-overlay"></div>',j=this;return j.cleanup(),$("body").append(i),_.delay(function(){var a=$("#"+f);a.addClass("ui-modal-show")},50),$("#"+g).on("click",h),this.id=f},g.prototype.confirm=function(a){function b(a){$("#"+h).removeClass("ui-modal-show"),_.delay(function(){m.cleanup(),k.resolve(a)},300)}var c,d="提示",e="assertive",f="确定",g="取消",h="alert-"+t.v4().substr(0,8),i="btn-ok-"+t.v4().substr(0,8),j="btn-cancel-"+t.v4().substr(0,8),k=$.Deferred();if("string"==typeof arguments[0])c=arguments[0]||"";else{if("object"!=typeof arguments[0])throw new Error("Illegal Parameters");c=a.message||"",a.title&&(d=a.title),"assertive"!=a.btnOkTheme&&(e="positive"),a.btnOkText&&(f=a.btnOkText),a.btnCancelText&&(g=a.btnCancelText)}var l='<div id="'+h+'" class="ui-modal ui-modal-dialog"><div class="ui-modal-content"><h2>'+d+"</h2><p>"+c+'</p><div class="ui-flex"><div class="ui-width-1-2" style="padding-right: 5px;"><button id="'+i+'" class="ui-btn ui-btn-block ui-btn-'+e+'">'+f+'</button></div><div class="ui-width-1-2" style="padding-left: 5px;"><button id="'+j+'" class="ui-btn ui-btn-block">'+g+'</button></div></div></div></div><div class="ui-modal-overlay"></div>',m=this;return m.cleanup(),$("body").append(l),_.delay(function(){var a=$("#"+h);a.addClass("ui-modal-show")},50),$("#"+i).on("click",function(){b(!0)}),$("#"+j).on("click",function(){b(!1)}),k.promise()};var z=new g,A=10,B=u.extend({constructor:function(a){var b={pageTransition:"default",pageTheme:"light"};arguments[0]&&"object"==typeof arguments[0]&&(v=_.extend(b,a))},_isReady:!1,history:[],timers:[],init:function(a){return this.routes=a.routes,this.defaultRoute=a.defaultRoute,this._isReady=!0,this},GET:function(){var a={},b=location.href.split("?");if(b.length>1)for(var c=b[1].split("&"),d=0;d<c.length;d++){var e=c[d].split("=");a[e[0]]=e[1]}return a}(),navigate:function(){if(!this._isReady)throw new Error("Uninitialized Engine");var a,b,c;if(!(arguments.length>=1&&"string"==typeof arguments[0]))throw new Error("Illegal Arguments");if(a=arguments[0],!this.routes[a])throw new Error("Undefined Route");if(1==arguments.length)c="forward";else if(2==arguments.length&&"object"==typeof arguments[1])b=arguments[1];else if(2==arguments.length&&"string"==typeof arguments[1])c=arguments[1];else{if(3!=arguments.length||"object"!=typeof arguments[1]||"string"!=typeof arguments[2])throw new Error("Illegal Arguments");b=arguments[1],c=arguments[2]}this.clearTimers(),"back"!=c&&(c="forward"),this.routes[a].render(c);var d=this.history;d.length>A&&d.splice(0,1),d.push({route:a,params:b||{}})},start:function(){if(!this._isReady)throw new Error("Uninitialized Engine");this.navigate(this.defaultRoute,arguments[0]||{})},back:function(){if(!this._isReady)throw new Error("Uninitialized Engine");if(this.history.length>=2){this.clearTimers(),this.history.pop();var a=_.last(this.history);this.navigate(a.route,a.params,"back")}},getCurrentRoute:function(){if(!this._isReady)throw new Error("Uninitialized Engine");return _.last(this.history)},addTimer:function(a,b){var c=this.timers;c.push({key:a,tid:b})},deleteTimers:function(a){var b=this.timers;_.each(b,function(b,c){b.key==a&&clearInterval(b.tid)}),b=_.filter(b,function(b){return b.key!=a})},clearTimers:function(){return 0==this.timers.length?!1:(_.each(this.timers,function(a){clearInterval(a.tid)}),void(this.timers=[]))},hasTimer:function(a){return _.find(timers,function(b){return b.key==a})}}),C={Settings:function(){return v},Engine:function(a){return new B(a)},Page:function(a){return new w(a)},showLoading:function(a){return x.show(a)},hideLoading:function(){x.hide()},LOADING_ID:function(){return x.id},toast:function(a,b){y.show(a,b)},alert:function(a){z.alert(a)},confirm:function(a){return z.confirm(a)},DIALOG_ID:function(){return z.id}};i.zui=C}();